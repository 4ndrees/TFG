<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <script src="javascript/index.js"></script>
    <script src="app.js"></script>
    <title>TFG-IAvsRealidad</title>
</head>
<body>
    <div class="window"></div>
    <div class="window"></div>
    <div class="window"></div>
    <div class="window"></div>
    <div class="window"></div>
    <div class="window"></div>
    <article class="pantalla-principal">
        <ul class="secciones">
            <li><a href="./index.html">Inicio</a></li>
            <li><a href="./metrics.html" class="active">Métricas</a></li>
            <li><a href="./train.html">Entrenamiento</a></li>
            <li><a href="./test.html">Test</a></li>
        </ul>
        <main>
            <h1 class="titulo-seccion">Métricas</h1>
            <h2 class="subtitulo">Información del modelo</h2>
            <section id="informacion-modelo">
                <div>
                    <select id="modelos-guardados" onchange="cambiarModelo()"></select>
                </div>
            </section>
            <section id="info-modelo">
                <div class="info">
                    <div class="columna-info">
                        <p>Modelo: <span id="modelo"></span></p>
                        <p>Fecha de entrenamiento: <span id="fecha_hora"></span></p>
                        <p>Epochs: <span id="epochs"></span></p>
                    </div>
                    <div class="columna-info">
                        <p>Optimizador: <span id="optimizer"></span></p>
                        <p>Minibatch Size: <span id="mini_batch_size"></span></p>
                        <p>Tasa de aprendizaje: <span id="learn_rate"></span></p>
                    </div>
                </div>
                
                </div>
            </section>
            <h2 class="subtitulo">Métricas generales</h2>
            <section id="metricas-generales">
                <h3>Resultados en entrenamiento</h3>
                <p>La siguiente gráfica muestra las curvas de accuracy y loss a lo largo de las épocas durante el entrenamiento del modelo</p>
                <div class="metricas">
                    <div class="metricas-elem" id="metricas-elem">
                        <img id="resultados">
                    </div>
                </div>
                <h3>Resultados en test</h3>
                <p>La siguiente tabla muestra las métricas de precisión, recall y F1. Cada una de estas métricas proporciona la siguiente información:</p>
                <ul>
                    <li>Precisión: Proporción de verdaderos positivos entre todos los positivos predichos</li>
                    <li>Recall: Proporción de verdaderos positivos entre todos los positivos reales</li>
                    <li>F1 Score: Media armónica entre precisión y recall, que equilibra ambos valores.</li>
                </ul>
                <div class="metricas">
                    <div class="metricas-elem">
                        <table>
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Precisión</th>
                                    <th>Recall</th>
                                    <th>F1-score</th>
                                </tr>
                            </thead>
                                <tbody id="metricas-body">
                            </tbody>
                        </table>
                    </div>
                </div>
                <p>
                    Una matriz de confusión es una tabla que resume el desempeño de un modelo de clasificación mostrando el número de 
                    aciertos y errores separados por clases, dividiendo las predicciones en: verdaderos positivos, falsos positivos, 
                    verdaderos negativos y falsos negativos.
                </p>
                <div class="metricas">
                    <div class="metricas-elem">
                        <img id="resultados-test">
                    </div>
                </div>
                <p>
                    La distribución de predicciones de un modelo de aprendizaje automático describe cómo se reparten las clases o 
                    valores predichos por el modelo, lo que permite analizar si hay sesgo hacia ciertas clases, si el modelo está 
                    balanceado o si tiende a predecir una clase más que otras.
                </p>   
                <div class="metricas">
                    <div class="metricas-elem">
                        <img id="predicciones">
                    </div>
                </div>
                <p>
                    La curva ROC (Receiver Operating Characteristic) muestra la relación entre la tasa de verdaderos positivos 
                    (recall) y la tasa de falsos positivos a diferentes umbrales de decisión, permitiendo evaluar el rendimiento 
                    de un modelo de clasificación binaria
                </p>
                <div class="metricas">
                    <div class="metricas-elem">
                        <img id="curva_roc">
                    </div>
                </div>
            </sectinon>
            <section id="return">
                <div class="return-elem">
                    <a href="./index.html"><button class="custom-btn btn">Volver a inicio</button></a>
                </div>
            </section>
        </main>
    </article>
    <script>
        window.addEventListener("load", () => {
            const urlParams = new URLSearchParams(window.location.search);
        
            let modeloSeleccionado = urlParams.get("modelo");
            if (!modeloSeleccionado){
                const select = document.getElementById("modelos-guardados");
                if (select) {
                    modeloSeleccionado = select.value;
                }
            }
            console.log(modeloSeleccionado);
            mostrarMetricas(modeloSeleccionado);
        });
    </script>
</body>
</html>