<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <script src="javascript/index.js"></script>
    <script src="app.js"></script>
    <title>TFG-IAvsRealidad</title>
</head>
<body>
    <div class="window"></div>
    <div class="window"></div>
    <div class="window"></div>
    <div class="window"></div>
    <div class="window"></div>
    <div class="window"></div>
    <article class="pantalla-principal">
        <ul>
            <li><a href="./index.html">Inicio</a></li>
            <li><a href="./metrics.html" class="active">Métricas</a></li>
            <li><a href="./train.html">Entrenamiento</a></li>
            <li><a href="./test.html">Test</a></li>
        </ul>
        <main>
            <h1 class="titulo-seccion">Métricas</h1>
            <h2 class="subtitulo">Información del modelo</h2>
            <section id="informacion-modelo">
                <div>
                    <select id="modelos-guardados" onchange="cambiarModelo()"></select>
                </div>
            </section>
            <section id="info-modelo">
                <div class="info">
                    <div class="columna-info">
                        <p>Modelo: <span id="modelo"></span></p>
                        <p>Fecha de entrenamiento: <span id="fecha_hora"></span></p>
                        <p>Epochs: <span id="epochs"></span></p>
                    </div>
                    <div class="columna-info">
                        <p>Optimizador: <span id="optimizer"></span></p>
                        <p>Minibatch Size: <span id="mini_batch_size"></span></p>
                        <p>Tasa de aprendizaje: <span id="learn_rate"></span></p>
                    </div>
                </div>
                
                </div>
            </section>
            <h2 class="subtitulo">Métricas generales</h2>
            <section id="metricas-generales">
                <h3>Resultados en entrenamiento</h3>
                <div class="metricas">
                    <div class="metricas-elem" id="metricas-elem">
                        <img id="resultados">
                    </div>
                </div>
                <h3>Resultados en test</h3>
                <div class="metricas">
                    <div class="metricas-elem">
                        <table>
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Precisión</th>
                                    <th>Recall</th>
                                    <th>F1-score</th>
                                </tr>
                            </thead>
                                <tbody id="metricas-body">
                            </tbody>
                        </table>
                    </div>
                    <div class="metricas-elem">
                        <img id="resultados-test">
                    </div>
                    <div class="metricas-elem">
                        <img id="predicciones">
                    </div>
                    <div class="metricas-elem">
                        <img id="curva_roc">
                    </div>
                </div>
            </sectinon>
            <section id="return">
                <div class="return-elem">
                    <a href="./index.html"><button class="custom-btn btn">Volver a inicio</button></a>
                </div>
            </section>
        </main>
    </article>
    <script>
        window.addEventListener("load", () => {
            const urlParams = new URLSearchParams(window.location.search);
        
            let modeloSeleccionado = urlParams.get("modelo");
            if (!modeloSeleccionado){
                const select = document.getElementById("modelos-guardados");
                if (select) {
                    modeloSeleccionado = select.value;
                }
            }
            console.log(modeloSeleccionado);
            mostrarMetricas(modeloSeleccionado);
        });
    </script>
</body>
</html>